{"openapi":"3.0.3","info":{"title":"ToCry API","version":"0.17.0","description":"A Kanban-style TODO application built in Crystal"},"paths":{"/api/v1/boards":{"get":{"description":"Get all accessible boards for the current user","tags":["Boards"],"responses":{"200":{"description":"Returns array of board names","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}}},"deprecated":false},"post":{"description":"Create a new board","tags":["Boards"],"requestBody":{"description":"New board creation request","content":{"application/json":{"schema":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"color_scheme":{"type":"string"}}}}},"required":false},"responses":{"201":{"description":"Board created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"string","description":"Success message"}}}}}},"400":{"description":"Invalid board name or data","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}}},"deprecated":false}},"/api/v1/boards/{board_name}":{"get":{"description":"Get complete board details including lanes and notes","tags":["Boards"],"parameters":[{"name":"board_name","schema":{"type":"string"},"in":"path","description":"Board name","required":true,"allowEmptyValue":false,"deprecated":false}],"responses":{"200":{"description":"Returns complete board state","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Board"}}}},"404":{"description":"Board not found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}}},"deprecated":false},"put":{"description":"Update board properties (rename, change visibility, reorganize lanes)","tags":["Boards"],"parameters":[{"name":"board_name","schema":{"type":"string"},"in":"path","description":"Board name","required":true,"allowEmptyValue":false,"deprecated":false}],"requestBody":{"description":"Board update request","content":{"application/json":{"schema":{"type":"object","required":[],"properties":{"new_name":{"type":"string"},"first_visible_lane":{"type":"integer"},"show_hidden_lanes":{"type":"boolean"},"color_scheme":{"type":"string"},"lanes":{"type":"array","items":{"$ref":"#/components/schemas/Lane"}}}}}},"required":false},"responses":{"200":{"description":"Board updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"string","description":"Success message"}}}}}},"404":{"description":"Board not found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}},"400":{"description":"Invalid update data","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}}},"deprecated":false},"delete":{"description":"Delete a board and all its data (idempotent - succeeds even if board already deleted)","tags":["Boards"],"parameters":[{"name":"board_name","schema":{"type":"string"},"in":"path","description":"Board name","required":true,"allowEmptyValue":false,"deprecated":false}],"responses":{"200":{"description":"Board deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"string","description":"Success message"}}}}}}},"deprecated":false}},"/api/v1/boards/{board_name}/share":{"post":{"description":"Share a board with another user","tags":["Boards"],"parameters":[{"name":"board_name","schema":{"type":"string"},"in":"path","description":"Board name","required":true,"allowEmptyValue":false,"deprecated":false}],"requestBody":{"description":"Board sharing request","content":{"application/json":{"schema":{"type":"object","required":["to_user_email"],"properties":{"to_user_email":{"type":"string"}}}}},"required":false},"responses":{"200":{"description":"Board shared successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"string","description":"Success message"}}}}}},"404":{"description":"Board not found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}},"400":{"description":"Invalid email address","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}}},"deprecated":false}},"/api/v1/boards/{board_name}/note":{"post":{"description":"Create a new note in a specific lane","tags":["Notes"],"parameters":[{"name":"board_name","schema":{"type":"string"},"in":"path","description":"Board name","required":true,"allowEmptyValue":false,"deprecated":false}],"requestBody":{"description":"New note creation request","content":{"application/json":{"schema":{"type":"object","required":["lane_name","note","note.title"],"properties":{"lane_name":{"type":"string"},"note":{"type":"object"},"note.title":{"type":"string"},"note.content":{"type":"string"},"note.tags":{"type":"array","items":{"type":"string"}},"note.expanded":{"type":"boolean"},"note.public":{"type":"boolean"},"note.attachments":{"type":"array","items":{"type":"string"}},"note.start_date":{"type":"string"},"note.end_date":{"type":"string"},"note.priority":{"type":"string"}}}}},"required":false},"responses":{"201":{"description":"Note created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"string","description":"Success message"}}}}}},"404":{"description":"Board or lane not found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}},"400":{"description":"Invalid note data","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}}},"deprecated":false}},"/api/v1/boards/{board_name}/note/{note_id}":{"put":{"description":"Update an existing note","tags":["Notes"],"parameters":[{"name":"board_name","schema":{"type":"string"},"in":"path","description":"Board name","required":true,"allowEmptyValue":false,"deprecated":false},{"name":"note_id","schema":{"type":"string"},"in":"path","description":"Note ID","required":true,"allowEmptyValue":false,"deprecated":false}],"requestBody":{"description":"Note update request","content":{"application/json":{"schema":{"type":"object","required":["note","note.title"],"properties":{"note":{"type":"object"},"note.title":{"type":"string"},"note.content":{"type":"string"},"note.tags":{"type":"array","items":{"type":"string"}},"note.expanded":{"type":"boolean"},"note.public":{"type":"boolean"},"note.attachments":{"type":"array","items":{"type":"string"}},"note.start_date":{"type":"string"},"note.end_date":{"type":"string"},"note.priority":{"type":"string"},"lane_name":{"type":"string"},"position":{"type":"integer"}}}}},"required":false},"responses":{"200":{"description":"Note updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"string","description":"Success message"}}}}}},"404":{"description":"Note not found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}},"400":{"description":"Invalid note data","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}}},"deprecated":false},"delete":{"description":"Delete a note (idempotent - succeeds even if note already deleted)","tags":["Notes"],"parameters":[{"name":"board_name","schema":{"type":"string"},"in":"path","description":"Board name","required":true,"allowEmptyValue":false,"deprecated":false},{"name":"note_id","schema":{"type":"string"},"in":"path","description":"Note ID","required":true,"allowEmptyValue":false,"deprecated":false}],"responses":{"200":{"description":"Note deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"string","description":"Success message"}}}}}}},"deprecated":false}},"/api/v1/boards/{board_name}/note/{note_id}/attach":{"post":{"description":"Attach a file to a note (multipart/form-data)","tags":["Notes"],"parameters":[{"name":"board_name","schema":{"type":"string"},"in":"path","description":"Board name","required":true,"allowEmptyValue":false,"deprecated":false},{"name":"note_id","schema":{"type":"string"},"in":"path","description":"Note ID","required":true,"allowEmptyValue":false,"deprecated":false}],"requestBody":{"description":"File to upload","content":{"multipart/form-data":{"schema":{"type":"object","required":["file"],"properties":{"file":{"type":"string"}}}}},"required":false},"responses":{"200":{"description":"File attached successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"string","description":"Success message"}}}}}},"404":{"description":"Note not found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}},"400":{"description":"File too large or invalid","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}}},"deprecated":false}},"/api/v1/boards/{board_name}/note/{note_id}/{attachment}":{"get":{"description":"Download an attachment from a note","tags":["Notes"],"parameters":[{"name":"board_name","schema":{"type":"string"},"in":"path","description":"Board name","required":true,"allowEmptyValue":false,"deprecated":false},{"name":"note_id","schema":{"type":"string"},"in":"path","description":"Note ID","required":true,"allowEmptyValue":false,"deprecated":false},{"name":"attachment","schema":{"type":"string"},"in":"path","description":"Attachment filename","required":true,"allowEmptyValue":false,"deprecated":false}],"responses":{"200":{"description":"File content (binary)","content":{"application/json":{"schema":{"type":"string","format":"binary"}}}},"404":{"description":"Note or attachment not found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}}},"deprecated":false},"delete":{"description":"Remove an attachment from a note (idempotent - succeeds even if attachment already deleted)","tags":["Notes"],"parameters":[{"name":"board_name","schema":{"type":"string"},"in":"path","description":"Board name","required":true,"allowEmptyValue":false,"deprecated":false},{"name":"note_id","schema":{"type":"string"},"in":"path","description":"Note ID","required":true,"allowEmptyValue":false,"deprecated":false},{"name":"attachment","schema":{"type":"string"},"in":"path","description":"Attachment filename","required":true,"allowEmptyValue":false,"deprecated":false}],"responses":{"200":{"description":"Attachment deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"string","description":"Success message"}}}}}}},"deprecated":false}},"/api/v1/attachments/{note_id}/{filename}":{"get":{"description":"Access note attachment (public endpoint)","tags":["Notes"],"parameters":[{"name":"note_id","schema":{"type":"string"},"in":"path","description":"Note ID","required":true,"allowEmptyValue":false,"deprecated":false},{"name":"filename","schema":{"type":"string"},"in":"path","description":"Attachment filename","required":true,"allowEmptyValue":false,"deprecated":false}],"responses":{"200":{"description":"File content (binary)","content":{"application/json":{"schema":{"type":"string","format":"binary"}}}},"404":{"description":"Attachment not found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}}},"deprecated":false}},"/api/v1/upload/image":{"post":{"description":"Upload an image file (multipart/form-data)","tags":["Uploads"],"requestBody":{"description":"File to upload","content":{"multipart/form-data":{"schema":{"type":"object","required":["file"],"properties":{"file":{"type":"string"}}}}},"required":false},"responses":{"201":{"description":"Image uploaded successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"string","description":"Success message"}}}}}},"400":{"description":"No file uploaded or invalid file type","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}},"413":{"description":"Payload Too Large","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"}}}}}}},"deprecated":false}},"/api/v1/auth_mode":{"get":{"description":"Get current authentication mode","tags":["Authentication"],"responses":{"200":{"description":"Authentication mode","content":{"application/json":{"schema":{"type":"object","properties":{"auth_mode":{"type":"string","description":"Authentication mode: google, basic, or noauth"}}}}}}},"deprecated":false}}},"servers":[],"tags":[{"name":"Boards","description":"Board management"},{"name":"Notes","description":"Note management"},{"name":"Uploads","description":"File upload management"},{"name":"Authentication","description":"Authentication information"}],"components":{"schemas":{"Note":{"type":"object","properties":{"sepia_id":{"type":"string","description":"Unique identifier for the note"},"title":{"type":"string","description":"Note title"},"content":{"type":"string","description":"Note content in markdown format"},"tags":{"type":"array","description":"Array of tags for the note","items":{"type":"string"}},"expanded":{"type":"boolean","description":"Whether the note is expanded to show full content"},"public":{"type":"boolean","description":"Whether the note is publicly accessible"},"attachments":{"type":"array","description":"Array of attachment filenames","items":{"type":"string"}},"start_date":{"type":"string","description":"Start date in ISO format","example":"2025-01-01"},"end_date":{"type":"string","description":"End date in ISO format","example":"2025-01-15"},"priority":{"type":"string","description":"Priority level: high, medium, or low","example":"medium"}}},"Lane":{"type":"object","properties":{"name":{"type":"string","description":"Lane name"},"notes":{"type":"array","description":"Array of notes in this lane","items":{"$ref":"#/components/schemas/Note"}}}},"Board":{"type":"object","properties":{"name":{"type":"string","description":"Board name"},"color_scheme":{"type":"string","description":"Color scheme name"},"first_visible_lane":{"type":"integer","description":"Index of the first visible lane"},"show_hidden_lanes":{"type":"boolean","description":"Whether to show hidden lanes"},"lanes":{"type":"array","description":"Array of lanes in this board","items":{"$ref":"#/components/schemas/Lane"}}}},"StringArray":{"type":"array","items":{"type":"string"}},"NoteArray":{"type":"array","items":{"$ref":"#/components/schemas/Note"}},"LaneArray":{"type":"array","items":{"$ref":"#/components/schemas/Lane"}}}}}
